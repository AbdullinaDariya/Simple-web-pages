<!DOCTYPE html>
<html lang="ru">
  <head>
	<h3>Абдуллина Дария ПИ18-1</h3>
	<h4>Задание 7</h4>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Задание 7</title>
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css"
    />
    <link rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/plug-ins/1.10.21/api/processing().js"></script>
  </head>
  <body>
  
    <table id="dt-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Название театра</th>
          <th>Сайт</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <script>
	async function loadData() {
    const res = await fetch(
      "https://apidata.mos.ru/v1/datasets/531/rows?api_key=0235c3e482940f862217a646e7c479f5"
    );
    const json = await res.json();

    json.forEach(async function (item) {
      const object = item.Cells;

      table.row
        .add([item.global_id, object.CommonName, object.WebSite])
        .draw(false);
    });
    table.processing(false);
  }

  table = $("#dt-table").DataTable({
    processing: true,
    responsive: true,
  });
  table.processing(true);

  loadData();</script>
  </body>
</html>
